(this.webpackJsonpmessaging=this.webpackJsonpmessaging||[]).push([[0],{11:function(e,t,s){},23:function(e,t,s){},30:function(e,t,s){"use strict";s.r(t);var a=s(2),n=s(4),r=s.n(n),c=s(12),i=s.n(c),o=(s(23),s(11),s(16)),d=s(6),u=s.n(d),b=s(8),h=s(13),l=s(14),m=s(17),g=s(15),j=s(10),p=(s(26),{apiKey:"AIzaSyBUJw0xY70GJTswOS_H5T22ekMRfP4JdPY",authDomain:"messaging-85e35.firebaseapp.com",databaseURL:"https://messaging-85e35-default-rtdb.firebaseio.com",projectId:"messaging-85e35",storageBucket:"messaging-85e35.appspot.com",messagingSenderId:"116251067224",appId:"1:116251067224:web:51d942047b661395bd9b2d",measurementId:"G-7YFB1JXVFF"}),f=function(e){Object(m.a)(s,e);var t=Object(g.a)(s);function s(e){var n;return Object(h.a)(this,s),(n=t.call(this,e)).componentDidMount=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j.a.initializeApp(p),n.setState({database:j.a.database()});case 2:case"end":return e.stop()}}),e)}))),n.connect=Object(b.a)(u.a.mark((function e(){var t,s,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.state,s=t.database,a=t.myId,e.next=4,s.ref("/notifs/"+a).remove();case 4:return e.next=6,s.ref("/notifs/"+a).on("value",(function(e){if(e.exists()){var t=e.val();n.setState({messages:[].concat(Object(o.a)(n.state.messages),[t])})}}));case 6:n.setState({isConnected:!0}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),n.sendMessage=Object(b.a)(u.a.mark((function e(){var t,s,a,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.state,s=t.database,a=t.receiverId,r=t.message,c=t.myId,e.next=4,s.ref("/notifs/"+a).set({message:r,from:c});case 4:n.setState({message:""}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),n.renderMessage=function(e,t){return Object(a.jsx)("div",{children:Object(a.jsxs)("h4",{children:["Message from ",e.from,": ",e.message]})},t)},n.state={database:null,isConnected:!1,myId:"",receiverId:"",message:"",messages:[]},n}return Object(l.a)(s,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.database===t.database}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{children:this.state.isConnected?Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Send a message:"}),Object(a.jsx)("input",{placeholder:"to",value:this.state.receiverId,onChange:function(t){return e.setState({receiverId:t.target.value})}}),Object(a.jsx)("input",{placeholder:"your message",value:this.state.message,onChange:function(t){return e.setState({message:t.target.value})}}),Object(a.jsx)("button",{onClick:this.sendMessage,children:"Send"}),Object(a.jsxs)("div",{children:["Received messages: ",this.state.messages.map(this.renderMessage)]})]}):Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"What is your ID:"}),Object(a.jsx)("input",{value:this.state.myId,onChange:function(t){return e.setState({myId:t.target.value})}}),Object(a.jsx)("button",{onClick:this.connect,children:"Connect"})]})})}}]),s}(r.a.Component);var v=function(){return Object(a.jsxs)("div",{className:"app",children:[Object(a.jsx)("h1",{children:"React Firebase Realtime Database Tutorial"}),Object(a.jsx)("h2",{children:"Send realtime messages to other users"}),Object(a.jsx)(f,{})]})},x=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,31)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;s(e),a(e),n(e),r(e),c(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(v,{})}),document.getElementById("root")),x()}},[[30,1,2]]]);
//# sourceMappingURL=main.3a68dc02.chunk.js.map